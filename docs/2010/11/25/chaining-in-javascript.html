<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=500">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Chaining in JavaScript</title>

    <link href="http://andyvanee.com/feed.xml" rel="alternate" type="application/rss+xml" title="Computer programming, philosophy and life" />
    <link href="/stylesheets/all.css" rel="stylesheet" />
    <meta name="google-site-verification" content="s26OWDKfDLzh9MT2cHAINISCx9kOQLBQpf4mDD84gvc" />

    <!-- OpenGraph Tags -->
    <meta property="og:title" content="Chaining in JavaScript" />
  </head>

  <body class="x2010 x2010_11 x2010_11_25 x2010_11_25_chaining-in-javascript">
    <div class="container">
      <div class="masthead column">
        <h1>
          <a href="/">andyvanee</a>
        </h1>
      </div>
      <div class="main row" role="main">
          <div class="post-single column column-3-2">
            <h2>Chaining in JavaScript</h2>
            <div class="date">Nov 25, 2010</div>

        <p>It&rsquo;s been bugging me for a while that I didn&rsquo;t understand the method behind jQuery&rsquo;s function chaining. So I built the smallest functional version of it. I call it aQuery <em>(for andy, or awesome).</em></p><p>This is the calling code:</p>
<pre class="highlight javascript"><code><span class="nb">window</span><span class="p">.</span><span class="nx">onload</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
    <span class="nx">aQ</span><span class="p">(</span><span class="s2">"#content"</span><span class="p">).</span><span class="nx">height</span><span class="p">().</span><span class="nx">background</span><span class="p">().</span><span class="nx">elem</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="s2">"hello"</span><span class="p">;</span>
<span class="p">};</span>
</code></pre>
<p>I have made two functions .height() and .background(), which do pretty much what their names suggest. The elem is the original object and so I use it to call &ldquo;native&rdquo; code. Maybe should have called it &ldquo;target&rdquo; to be consistent.</p>

<p>Here&rsquo;s the meat and potatoes of the &ldquo;library&rdquo;:</p>
<pre class="highlight javascript"><code><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">aQ</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="k">new</span> <span class="nx">aQuery</span><span class="p">.</span><span class="nx">fn</span><span class="p">(</span><span class="nx">selector</span><span class="p">);</span>
    <span class="p">};</span>

    <span class="kd">var</span> <span class="nx">aQuery</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">aQuery</span><span class="p">.</span><span class="nx">fn</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">elem</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="nx">selector</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s2">"#"</span><span class="p">)[</span><span class="mi">1</span><span class="p">]);</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="s2">""</span><span class="p">;</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">+</span> <span class="s2">"height: "</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">innerHeight</span> <span class="o">+</span> <span class="s2">"px;"</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cssText</span><span class="p">;</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">background</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(){</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">+</span> <span class="s2">"background-color: #444;"</span><span class="p">;</span>
            <span class="k">this</span><span class="p">.</span><span class="nx">elem</span><span class="p">.</span><span class="nx">style</span><span class="p">.</span><span class="nx">cssText</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">cssText</span><span class="p">;</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
        <span class="p">};</span>
        <span class="k">return</span> <span class="k">this</span><span class="p">;</span>
    <span class="p">};</span>

    <span class="k">return</span> <span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">aQ</span> <span class="o">=</span> <span class="nx">aQ</span><span class="p">);</span>
<span class="p">})();</span>
</code></pre>
<p>Each call to aQ makes a new object, primed with the selector string. This object has several functions and attributes, and all the functions return &ldquo;this&rdquo;, so they can be chained together. As it stands, it&rsquo;s not dynamic at all but you can use your imagination!</p>


            <div class="tags">
              tags:
                <span class="tag"><a href="/tags/programming.html">Programming</a></a></span>
                <span class="tag"><a href="/tags/javascript.html">JavaScript</a></a></span>
            </div>

          </div> <!-- .post-single -->

          <div class="pagination row">
            <div class="column column-1">
                <span class="next">
                  <a href="/2010/12/01/endangered-species-and-ux.html">&laquo; Newer</a>
                </span>
                <span class="prev">
                  <a href="/2010/10/08/call-for-web-standard.html">Older &raquo;</a>
                </span>
            </div>
          </div>
      </div>
    </div><!-- .container -->
    <script src="/javascripts/all.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-41421022-1', 'andyvanee.com');
      ga('send', 'pageview');
    </script>
  </body>
</html>
