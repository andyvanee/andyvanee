<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=500">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Playing With OpenResty</title>

    <link href="http://andyvanee.com/feed.xml" rel="alternate" type="application/rss+xml" title="Computer programming, philosophy and life" />
    <link href="/stylesheets/all.css" rel="stylesheet" />
    <meta name="google-site-verification" content="s26OWDKfDLzh9MT2cHAINISCx9kOQLBQpf4mDD84gvc" />
  </head>

  <body class="x2013 x2013_10 x2013_10_28 x2013_10_28_playing-with-openresty">
    <div class="container">
      <div class="masthead column">
        <h1>
          <a href="/">andyvanee</a>
        </h1>
      </div>
      <div class="main row" role="main">
          <div class="post-single column column-3-2">
            <h2>Playing With OpenResty</h2>
            <div class="date">Oct 28, 2013</div>

        <p><a href="http://openresty.org/">OpenResty</a> is a bit of an enigma. I first heard about
the project a few months back when reading about some benchmarks of various
web application platforms. OpenResty was WAY ahead of all the others.</p>

<p>The basic idea is that OpenResty is just Lua code embedded directly into the
nginx server. I had to try it out for myself.</p>

<p>I was pretty ambitious for my first explorations with OpenResty. I&rsquo;ve had
this project in the back of my mind for a bit, and I thought it would be
perfect for OpenResty. The idea is this:</p>

<p>Makefile-style dependency driven programming with the &ldquo;files&rdquo; living in
Redis. You write the source &ldquo;files&rdquo; to Redis as well as documents that outline
what dependencies will create a target file. This way, you can request a
file from the server that doesn&rsquo;t exist, but the server knows how to build it.
Some minimal templating will be built in as well.</p>

<p>I haven&rsquo;t got too far with it, but thought I&rsquo;d share a bit of how it is going.</p>

<p>First off, Lua can be pretty bizarre. There are a number of key ideas for
programming Lua that I need to get more comfortable with to do any serious
work. Also the package management is mostly non-existant.</p>

<p>Second, since I couldn&rsquo;t really figure out how to test my Lua code properly
I&rsquo;ve just done totally decoupled testing with Python hitting the server over
HTTP. This has actually worked really well.</p>

<p>Third, the Lua code can be suspended and resumed at random by nginx. This can
wreak havoc with code that is not written with this in mind.</p>

<p>And finally, it&rsquo;s actually quite fun! It feels quite primitive, but the syntax
is not bad and the performance is incredible. Rather than writing code for
a process that&rsquo;s running independently of the server, it&rsquo;s like you are writing
code directly in the server.</p>

<p>Fun stuff!</p>


            <div class="tags">
              tags:
                <span class="tag"><a href="/tags/programming.html">Programming</a></a></span>
                <span class="tag"><a href="/tags/nginx.html">Nginx</a></a></span>
                <span class="tag"><a href="/tags/lua.html">Lua</a></a></span>
            </div>

          </div> <!-- .post-single -->

          <div class="pagination row">
            <div class="column column-1">
                <span class="next">
                  <a href="/2013/10/29/udacity-cs212.html">&laquo; Newer</a>
                </span>
                <span class="prev">
                  <a href="/2013/10/27/new-layout.html">Older &raquo;</a>
                </span>
            </div>
          </div>
      </div>
    </div><!-- .container -->
    <script src="/javascripts/all.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-41421022-1', 'andyvanee.com');
      ga('send', 'pageview');
    </script>
  </body>
</html>
