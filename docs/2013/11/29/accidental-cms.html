<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=500">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Accidental CMS</title>

    <link href="http://andyvanee.com/feed.xml" rel="alternate" type="application/rss+xml" title="Computer programming, philosophy and life" />
    <link href="/stylesheets/all.css" rel="stylesheet" />
    <meta name="google-site-verification" content="s26OWDKfDLzh9MT2cHAINISCx9kOQLBQpf4mDD84gvc" />

    <!-- OpenGraph Tags -->
    <meta property="og:title" content="Accidental CMS" />
  </head>

  <body class="x2013 x2013_11 x2013_11_29 x2013_11_29_accidental-cms">
    <div class="container">
      <div class="masthead column">
        <h1>
          <a href="/">andyvanee</a>
        </h1>
      </div>
      <div class="main row" role="main">
          <div class="post-single column column-3-2">
            <h2>Accidental CMS</h2>
            <div class="date">Nov 29, 2013</div>

        <p>When I started reading <a href="http://hakunin.com/cms-
trap">this article called CMS Trap</a>, I had no idea what the hell he was talking about. As I pushed through, I
began saying &lsquo;yes&rsquo; more and more, and by the time I was finished I had to go
back and re-read it again because so much rang true.</p>

<p>Here&rsquo;s the gist:</p>

<blockquote>
<p>Ruthlessly axe the moving parts in your app.</p>
</blockquote>

<p>The primary target of the article is admin interfaces. Elaborate architectures
and interfaces make our code exponentially harder to refactor and extend. Simple
changes become bogged down in database migrations, complex dependencies and
unpredictable production data.</p>

<p>Near the end, he proposes some simpler alternatives to a full blow database-
backed CRUD admin interface. A class, a static page, a constant or a string in
the database.</p>

<p>I&rsquo;d like to propose another. A technique that I&rsquo;ve been using more and more:</p>

<h3>Static Models</h3>

<p>These are models that look and behave just like your standard database-backed
models, with the exception that they just store hard-coded values.</p>

<p>It should be pretty easy to mimic the interface of your standard model classes.
The rest of your code doesn&rsquo;t need to know where that data is coming from, and
doesn&rsquo;t need to change if you decide it really needs to be database backed.</p>

<p>Here&rsquo;s how it looks in DataMapper:</p>
<pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">Countries</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">all</span>
    <span class="p">[{</span><span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">'US'</span><span class="p">},</span> <span class="p">{</span><span class="ss">:name</span> <span class="o">=&gt;</span> <span class="s1">'CA'</span><span class="p">}]</span>
  <span class="k">end</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Users</span>
  <span class="k">def</span> <span class="nc">self</span><span class="o">.</span><span class="nf">all</span>
    <span class="no">YAML</span><span class="p">.</span><span class="nf">load_file</span><span class="p">(</span><span class="s1">'data/users.yml'</span><span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
<p>Go ahead and fake any other model methods you might need as well.</p>

<p>I&rsquo;ve been surprised at how flexible this approach is. It&rsquo;s much easier to define
tightly focused models, test their interactions, and refactor mercilessly while
prototyping. Some never end up needing to be runtime-editable, so they can stay
as they are. Others may come in handy as mock objects for testing (wrapping
external API&rsquo;s, for example).</p>

<p>So throw those generators and migrations away and keep things static as long as
you can!</p>


            <div class="tags">
              tags:
                <span class="tag"><a href="/tags/programming.html">Programming</a></a></span>
            </div>

          </div> <!-- .post-single -->

          <div class="pagination row">
            <div class="column column-1">
                <span class="next">
                  <a href="/2014/01/11/reevaluating-online-universities.html">&laquo; Newer</a>
                </span>
                <span class="prev">
                  <a href="/2013/11/28/the-world-is-immutable.html">Older &raquo;</a>
                </span>
            </div>
          </div>
      </div>
    </div><!-- .container -->
    <script src="/javascripts/all.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-41421022-1', 'andyvanee.com');
      ga('send', 'pageview');
    </script>
  </body>
</html>
