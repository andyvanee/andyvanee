<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=500">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Can I fire myself?</title>

    <link href="http://andyvanee.com/feed.xml" rel="alternate" type="application/rss+xml" title="Computer programming, philosophy and life" />
    <link href="/stylesheets/all.css" rel="stylesheet" />
    <meta name="google-site-verification" content="s26OWDKfDLzh9MT2cHAINISCx9kOQLBQpf4mDD84gvc" />
  </head>

  <body class="x2017 x2017_04 x2017_04_21 x2017_04_21_can-i-fire-myself">
    <div class="container">
      <div class="masthead column">
        <h1>
          <a href="/">andyvanee</a>
        </h1>
      </div>
      <div class="main row" role="main">
          <div class="post-single column column-3-2">
            <h2>Can I fire myself?</h2>
            <div class="date">Apr 21, 2017</div>

        <p>I&rsquo;ve been trying to live by the following axiom for a while now:</p>

<blockquote>
<p>Be kind to your future self</p>
</blockquote>

<p>This idea was ringing in my head as I posted the previous blog post. As a
developer, I am extremely bad at this some times. I often say &ldquo;Why would I use
service X when there are A, B and C open source projects that do it so much
better?!?!&rdquo;</p>

<p>Here&rsquo;s why: maintaining software is terrible.</p>

<p>It&rsquo;s fantastic when it&rsquo;s fresh and clean, but open source software is not
optimizing for your future self. Breaking compatibility is often necessary for
one reason or another. These reasons matter to maintainers, I get that. But the
same reasons don&rsquo;t really matter to your future self.</p>

<p>To drive home the point, I want to post an annotated command-line session of
exactly what was required to post a single article on my blog.</p>

<p>I haven&rsquo;t posted in a year, so I was assuming that stuff would be broken. That&rsquo;s
a given. And I&rsquo;m not actually that suprised by how long it took. But it does
impact how I view my software choices in the future.</p>

<p>It may appear that I&rsquo;m picking on Middleman or Ruby or whatever. I&rsquo;m not. This
is a ubiquitous problem across the board for any developer that has many
projects that they only sporadically maintain.</p>

<p>Okay, let&rsquo;s see what we&rsquo;ve got.</p>
<pre class="highlight plaintext"><code>cd andyvanee.github.com
ruby version
rbenv version
rbenv global 2.2.0
bundle
</code></pre>
<p>Oh yeah, an older ruby version. One of these should work.</p>
<pre class="highlight plaintext"><code>rbenv versions
rbenv global 2.3.3
bundle update
</code></pre>
<p>Hmm, I&rsquo;ve gone from middleman-core (3.3.10) to middleman-core (4.2.1). Is that
going to be a problem?</p>
<pre class="highlight plaintext"><code>bundle exec middleman build --verbose
</code></pre>
<p>Yup - <a href="https://github.com/middleman/middleman-sprockets/blob/master/docs/upgrade-3-to-4.md">absolutely a problem</a>.</p>

<p>Let&rsquo;s generate a blank site to see what we&rsquo;ve got:</p>
<pre class="highlight plaintext"><code>be middleman init blank
mv blank ..
ll config
</code></pre>
<p>For some reason I have an uncommitted config directory and a Dockerfile in
there. They don&rsquo;t seem important.</p>
<pre class="highlight plaintext"><code>subl source/posts/2017-04-21-deconstruct-2017-stronger-communities.md
git add source/posts/2017-04-21-deconstruct-2017-stronger-communities.md
git add Gemfile*
git add config source/feed.xml.builder wercker.yml
git reset config
git commit -m 'New post, update middleman and gems, probably break everything'
git push
</code></pre>
<p>Now I just push because I knew that I had a wercker bot to build the thing.
Maybe it will magically still build even though it&rsquo;s not working on my
machine&hellip; Nope.</p>

<p>Let&rsquo;s dig more into the blank generated project to see what&rsquo;s changed.</p>
<pre class="highlight plaintext"><code>subl ../../blank
cd build
git mv source/layouts/layout.erb source/
git mv source/stylesheets/all.css.less source/stylesheets/all.css.scss
git commit -am 'Get styles working'
</code></pre>
<p>LESS moved out of sprockets, which is why the styling was broken. Luckily, my
styles were minimal and the LESS file was also valid SCSS. Win!</p>

<p>But I still have zero posts showing up on my home page, so it doesn&rsquo;t really
qualify as a blog anymore. I see that the new files seem to all have a
<code>.html.markdown</code> extension. Maybe that&rsquo;s the problem?</p>
<pre class="highlight plaintext"><code>cd source/posts
for old in *.md; do mv $old `basename $old .md`.html.md; done
ll
for old in *.markdown; do mv $old `basename $old .markdown`.html.md; done
ls -1 source/posts | grep .html.html
ls -1 source/posts | grep -v .html.md
git add --all source
git add config.rb
git commit -m 'Posts actually rendering and permalinked correctly'
</code></pre>
<p>I now have posts!</p>
<pre class="highlight plaintext"><code>be middleman build
git commit -m 'Re-add summary'
</code></pre>
<p>I now have a properly rendering blog! I now look into why my deploys are failing.
I conclude that I have no idea why my build is failing, and Wercker was bought
by Oracle, so screw that. Let&rsquo;s switch to github pages.</p>
<pre class="highlight plaintext"><code>rm -rf build
git rm wercker.yml
be middleman build --help
be middleman build --build-dir=docs
cd docs
server
cd ..
touch Makefile
git add Makefile
git commit -m 'Build to docs directory and add Makefile'
</code></pre>
<p>Cool, we&rsquo;re building to a docs directory because github pages supports that
now and building to a separate branch always seemed like a hacky pain in the
ass.</p>

<p>But wait! Turns out User and Organization pages don&rsquo;t actually support that, so
we&rsquo;ve got to switch to make it a project. Okay.</p>
<pre class="highlight plaintext"><code>git remote rm origin
git remote add origin git@github.com:andyvanee/andyvanee.git
git push --set-upstream origin master
touch source/CNAME
cat &gt; source/CNAME
git pull
make
cat docs/CNAME
git add source
git add docs
git status
git commit -m 'Add CNAME to build'
git push
</code></pre>
<p>Now I start rummaging around the github pages docs for how to set up my DNS
records. Then I log in to switch them.</p>
<pre class="highlight plaintext"><code>dig andyvanee.com
</code></pre>
<p>And I&rsquo;ve finally posted to my blog again after nearly a year. If you are a
developer, none of this should seem unfamiliar, but I think we should all be
taking a hard look through our command line and browser history and ask:
Am I being kind to my future self?</p>



          </div> <!-- .post-single -->

          <div class="pagination row">
            <div class="column column-1">
                <span class="prev">
                  <a href="/2017/04/21/deconstruct-2017-stronger-communities.html">Older &raquo;</a>
                </span>
            </div>
          </div>
      </div>
    </div><!-- .container -->
    <script src="/javascripts/all.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-41421022-1', 'andyvanee.com');
      ga('send', 'pageview');
    </script>
  </body>
</html>
